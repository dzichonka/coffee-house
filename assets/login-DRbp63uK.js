import{f}from"./fetcher-IzjmCLXP.js";import{u as m}from"./appState-BenL3nAi.js";function v(e){const r=e.match(new RegExp("\\p{L}","gu"));return r?r.every(t=>/^[A-Za-z]$/.test(t)):!0}function c(e){return e.length<3?"Login must be at least 3 characters":v(e)?/^[A-Za-z]/.test(e)?null:"Login must start with a letter":"Only English letters allowed"}function d(e){return e.length<6?"Password must be at least 6 characters":/\d/.test(e)?null:"Password must contain a number"}const{setToken:L}=m(),n=document.querySelector("#login-form"),o=n?.querySelector("#login"),a=n?.querySelector("#password"),s=n?.querySelector("#login-btn");if(!(n instanceof HTMLFormElement)||!(o instanceof HTMLInputElement)||!(a instanceof HTMLInputElement)||!(s instanceof HTMLButtonElement))throw new Error("Login form elements not found");s.disabled=!0;function u(e,r){const t=e.nextElementSibling;if(!(t instanceof HTMLSpanElement)||!t)throw new Error("Error span not found");e.addEventListener("blur",()=>{const l=r(e.value);l?(e.classList.add("invalid"),t.textContent=l,t.classList.add("active")):e.classList.add("valid"),g()}),e.addEventListener("focus",()=>{e.classList.remove("invalid"),e.classList.remove("valid"),t.textContent="",t.classList.remove("active")})}function g(){if(!o||!a||!s)return;const e=c(o.value),r=d(a.value);s.disabled=!!e||!!r}u(o,c);u(a,d);s.addEventListener("click",async e=>{if(e.preventDefault(),n.querySelector(".alert-error")&&n.querySelector(".alert-error")?.remove(),!o||!a)return;const r={login:o.value,password:a.value},{data:t,error:l}=await f("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/login","#loader",{method:"POST",body:r});if(l){const i=document.createElement("div");i.className="alert-error",i.textContent="Incorrect login or password",n.append(i)}t&&t.data&&(L(t.data.access_token),window.location.href="index")});
//# sourceMappingURL=login-DRbp63uK.js.map
