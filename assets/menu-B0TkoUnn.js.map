{"version":3,"file":"menu-B0TkoUnn.js","sources":["../../src/scripts/utils/modal.ts","../../src/types/typeGuards.ts","../../src/scripts/utils/cards.ts"],"sourcesContent":["const modal = document.querySelector<HTMLDivElement>(\"#modal\");\nconst content = document.querySelector<HTMLDivElement>(\".window\");\nconst closeBtn = document.querySelector<HTMLButtonElement>(\"#close\");\nconst price = document.querySelector<HTMLHeadingElement>(\"#modal-price\");\nconst img = document.querySelector<HTMLImageElement>(\"#modal-img\");\nconst title = document.querySelector<HTMLHeadingElement>(\"#modal-title\");\nconst description = document.querySelector<HTMLElement>(\"#modal-description\");\n\nconst tabsSize = Array.from(\n  document.querySelectorAll<HTMLDivElement>(\".tab-size\")\n);\nconst tabsAdditives = Array.from(\n  document.querySelectorAll<HTMLElement>(\".tab-add\")\n);\n\nlet sizeListenersAdded = false;\nlet addListenersAdded = false;\nfunction closeModal() {\n  modal?.classList.add(\"closed\");\n  document.body.style.overflow = \"auto\";\n  tabsSize.forEach((tab) => tab.classList.remove(\"active\"));\n  tabsSize[0].classList.add(\"active\");\n  tabsAdditives.forEach((tab) => tab.classList.remove(\"active\"));\n}\n\ncloseBtn?.addEventListener(\"click\", () => {\n  closeModal();\n});\n\nwindow.addEventListener(\"click\", (e: Event): void => {\n  if (e.target === modal && e.target !== content) {\n    closeModal();\n  }\n});\n\nexport function displayModal(item: ProductType, index: number): void {\n  let basePrice = Number(item.price);\n  let additivesPrice = 0;\n\n  const updatePrice = (): void => {\n    const total = basePrice + additivesPrice;\n    if (price) price.textContent = `$${total.toFixed(2)}`;\n  };\n\n  if (!modal || !content || !price) return;\n  modal.classList.remove(\"closed\");\n  document.body.style.overflow = \"hidden\";\n\n  if (img) {\n    img.src = `images/menu/${item.category}/${index}.png`;\n    img.alt = item.name;\n  }\n  if (title) title.textContent = item.name;\n  if (description) description.textContent = item.description;\n\n  const sizeKeys: SizesType[] = [\"s\", \"m\", \"l\"];\n\n  if (!sizeListenersAdded) {\n    sizeKeys.forEach((key: SizesType, i: number): void => {\n      const sizeData: SizeType = item.sizes[key];\n      const span = tabsSize[i].querySelector<HTMLSpanElement>(\".text\");\n      tabsSize[i].setAttribute(\"data-size\", sizeData[\"add-price\"]);\n      if (span) span.textContent = sizeData.size;\n\n      tabsSize[i].addEventListener(\"click\", () => {\n        tabsSize.forEach((tab) => {\n          tab.classList.remove(\"active\");\n          basePrice = Number(item.price);\n        });\n        tabsSize[i].classList.add(\"active\");\n        basePrice += Number(tabsSize[i].getAttribute(\"data-size\"));\n        updatePrice();\n      });\n    });\n    sizeListenersAdded = true;\n  }\n\n  if (!addListenersAdded) {\n    item.additives.forEach((additive, i) => {\n      const span = tabsAdditives[i].querySelector(\".text\");\n      tabsAdditives[i].setAttribute(\"data-add\", additive[\"add-price\"]);\n      if (span) span.textContent = additive.name;\n\n      tabsAdditives[i].addEventListener(\"click\", () => {\n        tabsAdditives[i].classList.toggle(\"active\");\n        if (tabsAdditives[i].classList.contains(\"active\")) {\n          additivesPrice += Number(tabsAdditives[i].getAttribute(\"data-add\"));\n        } else {\n          additivesPrice -= Number(tabsAdditives[i].getAttribute(\"data-add\"));\n        }\n        updatePrice();\n      });\n    });\n    addListenersAdded = true;\n  }\n\n  updatePrice();\n}\n","export function isCategoryType(value: string): value is CategoryType {\n  return [\"coffee\", \"tea\", \"dessert\"].includes(value);\n}\n\nexport function isSizesType(value: string): value is SizesType {\n  return [\"s\", \"m\", \"l\"].includes(value);\n}\n","import { displayModal } from \"./modal\";\nimport { isCategoryType } from \"@/types/typeGuards\";\n\nconst wrapper = document.querySelector<HTMLDivElement>(\".cards\");\nconst tabs = Array.from(\n  document.querySelectorAll<HTMLButtonElement>(\".tab-category\")\n);\nconst refresh = document.querySelector<HTMLButtonElement>(\"#refresh\");\n\nlet currentCategory: CategoryType = \"coffee\";\n\nconst isMobile = () => window.innerWidth <= 768;\n\nasync function fetchCards(): Promise<ProductsType> {\n  const response = await fetch(\"assets/products.json\");\n  return await response.json();\n}\n\nconst products = await fetchCards();\n\nfunction displayCards(\n  category: CategoryType,\n  visibleCount: VisibleCountType = isMobile() ? 4 : 8\n) {\n  if (!wrapper) return;\n  wrapper.innerHTML = \"\";\n  const cards = products.filter((product) => product.category === category);\n  const visibleCards = cards.slice(0, visibleCount);\n\n  visibleCards.forEach((card: ProductType, index: number): void => {\n    const cardElement = document.createElement(\"div\");\n    cardElement.classList.add(\"card\");\n    cardElement.innerHTML = `\n      <div class=\"image-container\">\n        <img\n          src=\"images/menu/${category}/${index}.png\"\n          alt=\"${card.name}\"\n        />\n      </div>\n      <div class=\"description-container\">\n        <div class=\"description\">\n          <h3>${card.name}</h3>\n          <p>${card.description}</p>\n        </div>\n        <h3>$${card.price}</h3>\n      </div>\n    `;\n    wrapper.appendChild(cardElement);\n\n    cardElement.addEventListener(\"click\", (): void => {\n      displayModal(card, index);\n    });\n  });\n\n  if (isMobile() && cards.length > visibleCards.length) {\n    refresh?.classList.remove(\"hidden\");\n  } else {\n    refresh?.classList.add(\"hidden\");\n  }\n}\n\ntabs.forEach((tab) => {\n  tab.addEventListener(\"click\", (): void => {\n    tabs.forEach((t) => t.classList.remove(\"active\"));\n    tab.classList.add(\"active\");\n\n    const tabValue = tab.dataset.tab;\n    if (!tabValue || !isCategoryType(tabValue)) return;\n    currentCategory = tabValue;\n    displayCards(currentCategory);\n  });\n});\n\nrefresh?.addEventListener(\"click\", () => {\n  displayCards(currentCategory, 8);\n  refresh.classList.add(\"hidden\");\n});\n\nlet lastIsMobile = isMobile();\nwindow.addEventListener(\"resize\", (): void => {\n  const nowIsMobile = isMobile();\n  if (nowIsMobile !== lastIsMobile) {\n    displayCards(currentCategory);\n    lastIsMobile = nowIsMobile;\n  }\n});\n\ndisplayCards(currentCategory);\n"],"names":["modal","content","closeBtn","price","img","title","description","tabsSize","tabsAdditives","sizeListenersAdded","addListenersAdded","closeModal","tab","displayModal","item","index","basePrice","additivesPrice","updatePrice","total","key","i","sizeData","span","additive","isCategoryType","value","wrapper","tabs","refresh","currentCategory","isMobile","fetchCards","products","displayCards","category","visibleCount","cards","product","visibleCards","card","cardElement","t","tabValue","lastIsMobile","nowIsMobile"],"mappings":"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"}