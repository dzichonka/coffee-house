{"version":3,"file":"orders-BfPLVoA3.js","sources":["../../src/scripts/modules/orders.ts"],"sourcesContent":["import { onAuthStateChanged } from \"firebase/auth\";\nimport { loadUserData } from \"../api/user\";\nimport { auth } from \"@/firebase\";\n\nconst wrapper: HTMLDivElement | null = document.querySelector(\"#orders-list\");\n\nif (!(wrapper instanceof HTMLDivElement)) {\n  throw new Error(\"No orders elements found\");\n}\n\nexport const getOrders = async () => {\n  onAuthStateChanged(auth, async (user) => {\n    if (user) {\n      const userData = await loadUserData();\n\n      if (!userData) {\n        console.error(\"No user data found in Firestore\");\n        return;\n      }\n      const orders = userData.orders;\n\n      if (!orders) {\n        console.error(\"No orders found in user data\");\n        return;\n      }\n\n      const header = document.createElement(\"div\");\n      header.classList.add(\"order\");\n      header.innerHTML = `\n          <div>#</div>\n          <div>Date of order</div>\n          <div>Items</div>\n          <div>Price</div>\n          `;\n\n      wrapper.append(header);\n\n      orders.map((order: Order, index) => {\n        const orderDiv = document.createElement(\"div\");\n        orderDiv.classList.add(\"order\");\n        orderDiv.innerHTML = `\n          <div>${index + 1}</div>\n          <div>${order.createdAt?.slice(0, 10)}</div>\n          <div>${order.items\n            .map((item) => {\n              return `<p>${item.name} x ${item.quantity}</p>`;\n            })\n            .join(\"\")}</div>\n          <div>$${order.totalPrice.toFixed(2)}</div>\n\n          `;\n\n        wrapper.append(orderDiv);\n      });\n    }\n  });\n};\n\ngetOrders();\n"],"names":["wrapper","getOrders","onAuthStateChanged","auth","user","userData","loadUserData","orders","header","order","index","orderDiv","item"],"mappings":"yFAIA,MAAMA,EAAiC,SAAS,cAAc,cAAc,EAE5E,GAAI,EAAEA,aAAmB,gBACvB,MAAM,IAAI,MAAM,0BAA0B,EAGrC,MAAMC,EAAY,SAAY,CACnCC,EAAmBC,EAAM,MAAOC,GAAS,CACvC,GAAIA,EAAM,CACR,MAAMC,EAAW,MAAMC,EAAA,EAEvB,GAAI,CAACD,EAAU,CACb,QAAQ,MAAM,iCAAiC,EAC/C,MACF,CACA,MAAME,EAASF,EAAS,OAExB,GAAI,CAACE,EAAQ,CACX,QAAQ,MAAM,8BAA8B,EAC5C,MACF,CAEA,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,OAAO,EAC5BA,EAAO,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,YAOnBR,EAAQ,OAAOQ,CAAM,EAErBD,EAAO,IAAI,CAACE,EAAcC,IAAU,CAClC,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAU,IAAI,OAAO,EAC9BA,EAAS,UAAY;AAAA,iBACZD,EAAQ,CAAC;AAAA,iBACTD,EAAM,WAAW,MAAM,EAAG,EAAE,CAAC;AAAA,iBAC7BA,EAAM,MACV,IAAKG,GACG,MAAMA,EAAK,IAAI,MAAMA,EAAK,QAAQ,MAC1C,EACA,KAAK,EAAE,CAAC;AAAA,kBACHH,EAAM,WAAW,QAAQ,CAAC,CAAC;AAAA;AAAA,YAIrCT,EAAQ,OAAOW,CAAQ,CACzB,CAAC,CACH,CACF,CAAC,CACH,EAEAV,EAAA"}