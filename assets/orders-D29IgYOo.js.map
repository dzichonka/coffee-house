{"version":3,"file":"orders-D29IgYOo.js","sources":["../../src/scripts/modules/orders.ts"],"sourcesContent":["import { onAuthStateChanged } from \"firebase/auth\";\nimport { loadUserData } from \"@/scripts/api/user\";\nimport { auth } from \"@/firebase\";\n\nconst wrapper: HTMLTableElement | null = document.querySelector(\"#orders-list\");\n\nif (!(wrapper instanceof HTMLTableElement)) {\n  throw new Error(\"No orders elements found\");\n}\n\nexport const getOrders = async () => {\n  onAuthStateChanged(auth, async (user) => {\n    if (user) {\n      const userData = await loadUserData();\n\n      if (!userData) {\n        wrapper.innerHTML = \"No user data found\";\n        return;\n      }\n      const orders = userData.orders;\n\n      if (!orders) {\n        wrapper.innerHTML = \"No orders found\";\n        return;\n      }\n\n      const header = document.createElement(\"thead\");\n      header.innerHTML = `<tr><th>#</th><th>Date</th><th>Items</th><th>Price</th></tr>`;\n\n      const body = document.createElement(\"tbody\");\n\n      wrapper.append(header, body);\n\n      orders.map((order: Order, index) => {\n        const orderDiv = document.createElement(\"tr\");\n        orderDiv.innerHTML = `\n          <td>${index + 1}</td>\n          <td>${order.createdAt?.slice(0, 10)}</td>\n          <td>${order.items\n            .map((item) => {\n              return `<p>${item.name} x ${item.quantity}</p>`;\n            })\n            .join(\"\")}</td>\n          <td>$${order.totalPrice.toFixed(2)}</td>\n          `;\n\n        body.append(orderDiv);\n      });\n    }\n  });\n};\n\ngetOrders();\n"],"names":["wrapper","getOrders","onAuthStateChanged","auth","user","userData","loadUserData","orders","header","body","order","index","orderDiv","item"],"mappings":"yFAIA,MAAMA,EAAmC,SAAS,cAAc,cAAc,EAE9E,GAAI,EAAEA,aAAmB,kBACvB,MAAM,IAAI,MAAM,0BAA0B,EAGrC,MAAMC,EAAY,SAAY,CACnCC,EAAmBC,EAAM,MAAOC,GAAS,CACvC,GAAIA,EAAM,CACR,MAAMC,EAAW,MAAMC,EAAA,EAEvB,GAAI,CAACD,EAAU,CACbL,EAAQ,UAAY,qBACpB,MACF,CACA,MAAMO,EAASF,EAAS,OAExB,GAAI,CAACE,EAAQ,CACXP,EAAQ,UAAY,kBACpB,MACF,CAEA,MAAMQ,EAAS,SAAS,cAAc,OAAO,EAC7CA,EAAO,UAAY,+DAEnB,MAAMC,EAAO,SAAS,cAAc,OAAO,EAE3CT,EAAQ,OAAOQ,EAAQC,CAAI,EAE3BF,EAAO,IAAI,CAACG,EAAcC,IAAU,CAClC,MAAMC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAY;AAAA,gBACbD,EAAQ,CAAC;AAAA,gBACTD,EAAM,WAAW,MAAM,EAAG,EAAE,CAAC;AAAA,gBAC7BA,EAAM,MACT,IAAKG,GACG,MAAMA,EAAK,IAAI,MAAMA,EAAK,QAAQ,MAC1C,EACA,KAAK,EAAE,CAAC;AAAA,iBACJH,EAAM,WAAW,QAAQ,CAAC,CAAC;AAAA,YAGpCD,EAAK,OAAOG,CAAQ,CACtB,CAAC,CACH,CACF,CAAC,CACH,EAEAX,EAAA"}