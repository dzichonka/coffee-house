import{u}from"./userState-BenL3nAi.js";const a="cartState";function l(){const t=localStorage.getItem(a);return t?JSON.parse(t):{items:[],totalPriceOld:0,totalPriceNew:0}}function i(t){localStorage.setItem(a,JSON.stringify(t))}let n=l();function c(){n.totalPriceOld=n.items.reduce((t,e)=>t+e.priceOld*e.quantity,0),n.totalPriceNew=n.items.reduce((t,e)=>t+e.priceNew*e.quantity,0)}function d(t){const e=n.items.find(o=>o.productId===t.productId&&o.size===t.size&&JSON.stringify(o.additives)===JSON.stringify(t.additives));e?e.quantity+=t.quantity:n.items.push(t),c(),i(n)}function f(){n={items:[],totalPriceOld:0,totalPriceNew:0},i(n)}function g(){return n.items}function p(t){n.items=t,c(),i(n)}function S(){return n.totalPriceOld}function m(){return n.totalPriceNew}function y(){return n.items.reduce((t,e)=>t+e.quantity,0)}function O(){return{addItem:d,clear:f,getCart:g,setCart:p,getTotalPriceOld:S,getTotalPriceNew:m,getTotalCount:y}}const{isLoggedIn:C}=u(),{getTotalCount:N}=O();function P(){const t=document.querySelector("#nav-right");if(!t)return;const e=N(),o=t.querySelector(".link-cart"),s=Number(o?.querySelector("span")?.textContent||0);if(C()||e>0)if(o){if(s!==e){const r=o.querySelector("span");r&&(r.textContent=e>0?String(e):"")}}else{const r=document.createElement("a");r.classList.add("btn-icon","link-cart"),r.href="cart",r.innerHTML=`
        <img src="icons/shopping-bag.svg" alt="Shopping cart icon" />
        <span>${e>0?e:""}</span>
      `,t.prepend(r)}else o&&o.remove()}const q=Object.freeze(Object.defineProperty({__proto__:null,addCartIcon:P},Symbol.toStringTag,{value:"Module"}));export{P as a,q as b,O as u};
//# sourceMappingURL=addCartIcon-y838yzLs.js.map
