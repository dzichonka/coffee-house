import{o as l,a as d}from"./firebase-CxVZMhw8.js";const c="cartState";function f(){const t=localStorage.getItem(c);return t?JSON.parse(t):{items:[],totalPriceOld:0,totalPriceNew:0}}function i(t){localStorage.setItem(c,JSON.stringify(t))}let e=f();function s(){e.totalPriceOld=e.items.reduce((t,n)=>t+n.priceOld*n.quantity,0),e.totalPriceNew=e.items.reduce((t,n)=>t+n.priceNew*n.quantity,0)}function g(t){const n=e.items.find(o=>o.productId===t.productId&&o.size===t.size&&JSON.stringify(o.additives)===JSON.stringify(t.additives));n?n.quantity+=t.quantity:e.items.push(t),s(),i(e)}function p(){e={items:[],totalPriceOld:0,totalPriceNew:0},i(e)}function S(){return e.items}function y(t){e.items=t,s(),i(e)}function m(){return e.totalPriceOld}function O(){return e.totalPriceNew}function C(){return e.items.reduce((t,n)=>t+n.quantity,0)}function N(){return{addItem:g,clear:p,getCart:S,setCart:y,getTotalPriceOld:m,getTotalPriceNew:O,getTotalCount:C}}const{getTotalCount:P}=N();function T(){const t=document.querySelector("#nav-right");t&&l(d,n=>{const o=P(),a=t.querySelector(".link-cart"),u=Number(a?.querySelector("span")?.textContent||0);if(n||o>0)if(a){if(u!==o){const r=a.querySelector("span");r&&(r.textContent=o>0?String(o):"")}}else{const r=document.createElement("a");r.classList.add("btn-icon","link-cart"),r.href="cart",r.innerHTML=`
        <i class="fa-solid fa-bag-shopping"></i>
        <span>${o>0?o:""}</span>
      `,t.prepend(r)}else a&&a.remove()})}const b=Object.freeze(Object.defineProperty({__proto__:null,addCartIcon:T},Symbol.toStringTag,{value:"Module"}));export{T as a,b,N as u};
//# sourceMappingURL=addCartIcon-BIPM-ezy.js.map
