{"version":3,"file":"cards-D3Gh4C9O.js","sources":["../../src/types/typeGuards.ts","../../src/scripts/modules/cards.ts"],"sourcesContent":["export function isCategoryType(value: string): value is CategoryType {\n  return [\"coffee\", \"tea\", \"dessert\"].includes(value);\n}\n\nexport function isSizesType(value: string): value is SizesType {\n  return [\"s\", \"m\", \"l\"].includes(value);\n}\n","import { displayModal } from \"./modal\";\nimport { isCategoryType } from \"@/types/typeGuards\";\nimport { fetcher } from \"../utils/fetcher\";\nimport { useUserState } from \"../state/userState\";\n\nconst { isLoggedIn } = useUserState();\n\nconst wrapper: HTMLDivElement | null = document.querySelector(\".cards\");\nconst tabs: HTMLDivElement[] = Array.from(\n  document.querySelectorAll(\".tab-category\")\n);\nconst refresh: HTMLButtonElement | null = document.querySelector(\"#refresh\");\n\nlet currentCategory: CategoryType = \"coffee\";\n\nconst isMobile = () => window.innerWidth <= 768;\n\nconst { data: res, error } = await fetcher<{\n  data: FavoriteProduct[];\n  message?: string;\n  error?: string;\n}>(\n  \"https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/products\",\n  \"#loader\"\n);\n\nif (error) {\n  if (wrapper) wrapper.innerHTML = \"<p>Failed to load products.</p>\";\n}\n\nconst products = res?.data ?? [];\n\nconsole.log(\"Products loaded:\", products);\n\nlet visibleCount: number = isMobile() ? 4 : 8;\n\nfunction displayCards(category: CategoryType) {\n  if (!wrapper) return;\n  wrapper.innerHTML = \"\";\n  const cards = products.filter((product) => product.category === category);\n  const visibleCards = cards.slice(0, visibleCount);\n\n  visibleCards.forEach((card: ProductType): void => {\n    const cardElement: HTMLDivElement = document.createElement(\"div\");\n    cardElement.classList.add(\"card\");\n    cardElement.innerHTML = `\n      <div class=\"image-container\">\n        <img\n          src=\"images/menu/${card.id}.png\"\n          alt=\"${card.name}\"\n        />\n      </div>\n      <div class=\"description-container\">\n        <div class=\"description\">\n          <h3>${card.name}</h3>\n          <p>${card.description}</p>\n        </div>\n         <div class=\"price-container\">\n${\n  isLoggedIn() && card.discountPrice\n    ? `\n          <h3 class=\"price\">$${card.discountPrice}</h3>\n          <h3 class=\"price__old\">$${card.price}</h3>\n`\n    : `\n          <h3 class=\"price\">$${card.price}</h3>\n`\n}\n        </div>\n      </div>\n      </div>\n    `;\n    wrapper.append(cardElement);\n\n    cardElement.addEventListener(\"click\", (): void => {\n      displayModal(card.id);\n    });\n  });\n\n  function checkRefreshVisibility() {\n    if (!refresh) return;\n    if (cards.length > visibleCards.length) {\n      refresh.classList.remove(\"hidden\");\n    } else {\n      refresh.classList.add(\"hidden\");\n    }\n  }\n  checkRefreshVisibility();\n}\n\ntabs.forEach((tab) => {\n  tab.addEventListener(\"click\", (): void => {\n    tabs.forEach((t) => t.classList.remove(\"active\"));\n    tab.classList.add(\"active\");\n    visibleCount = isMobile() ? 4 : 8;\n\n    const tabValue = tab.dataset.tab;\n    if (!tabValue || !isCategoryType(tabValue)) return;\n    currentCategory = tabValue;\n    displayCards(currentCategory);\n  });\n});\n\nrefresh?.addEventListener(\"click\", () => {\n  visibleCount += 4;\n  displayCards(currentCategory);\n});\n\nlet lastIsMobile = isMobile();\nwindow.addEventListener(\"resize\", (): void => {\n  const nowIsMobile = isMobile();\n  if (nowIsMobile !== lastIsMobile) {\n    displayCards(currentCategory);\n    lastIsMobile = nowIsMobile;\n  }\n});\n\ndisplayCards(currentCategory);\n"],"names":["isCategoryType","value","isLoggedIn","useUserState","wrapper","tabs","refresh","currentCategory","isMobile","res","error","fetcher","products","visibleCount","displayCards","category","cards","product","visibleCards","card","cardElement","displayModal","checkRefreshVisibility","tab","t","tabValue","lastIsMobile","nowIsMobile"],"mappings":"yIAAO,SAASA,EAAeC,EAAsC,CACnE,MAAO,CAAC,SAAU,MAAO,SAAS,EAAE,SAASA,CAAK,CACpD,CCGA,KAAM,CAAE,WAAAC,CAAA,EAAeC,EAAA,EAEjBC,EAAiC,SAAS,cAAc,QAAQ,EAChEC,EAAyB,MAAM,KACnC,SAAS,iBAAiB,eAAe,CAC3C,EACMC,EAAoC,SAAS,cAAc,UAAU,EAE3E,IAAIC,EAAgC,SAEpC,MAAMC,EAAW,IAAM,OAAO,YAAc,IAEtC,CAAE,KAAMC,EAAK,MAAAC,CAAA,EAAU,MAAMC,EAKjC,qEACA,SACF,EAEID,GACEN,MAAiB,UAAY,mCAGnC,MAAMQ,EAAWH,GAAK,MAAQ,CAAA,EAE9B,QAAQ,IAAI,mBAAoBG,CAAQ,EAExC,IAAIC,EAAuBL,IAAa,EAAI,EAE5C,SAASM,EAAaC,EAAwB,CAC5C,GAAI,CAACX,EAAS,OACdA,EAAQ,UAAY,GACpB,MAAMY,EAAQJ,EAAS,OAAQK,GAAYA,EAAQ,WAAaF,CAAQ,EAClEG,EAAeF,EAAM,MAAM,EAAGH,CAAY,EAEhDK,EAAa,QAASC,GAA4B,CAChD,MAAMC,EAA8B,SAAS,cAAc,KAAK,EAChEA,EAAY,UAAU,IAAI,MAAM,EAChCA,EAAY,UAAY;AAAA;AAAA;AAAA,6BAGCD,EAAK,EAAE;AAAA,iBACnBA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKVA,EAAK,IAAI;AAAA,eACVA,EAAK,WAAW;AAAA;AAAA;AAAA,EAI7BjB,EAAA,GAAgBiB,EAAK,cACjB;AAAA,+BACyBA,EAAK,aAAa;AAAA,oCACbA,EAAK,KAAK;AAAA,EAExC;AAAA,+BACyBA,EAAK,KAAK;AAAA,CAEzC;AAAA;AAAA;AAAA;AAAA,MAKIf,EAAQ,OAAOgB,CAAW,EAE1BA,EAAY,iBAAiB,QAAS,IAAY,CAChDC,EAAaF,EAAK,EAAE,CACtB,CAAC,CACH,CAAC,EAED,SAASG,GAAyB,CAC3BhB,IACDU,EAAM,OAASE,EAAa,OAC9BZ,EAAQ,UAAU,OAAO,QAAQ,EAEjCA,EAAQ,UAAU,IAAI,QAAQ,EAElC,CACAgB,EAAA,CACF,CAEAjB,EAAK,QAASkB,GAAQ,CACpBA,EAAI,iBAAiB,QAAS,IAAY,CACxClB,EAAK,QAASmB,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAChDD,EAAI,UAAU,IAAI,QAAQ,EAC1BV,EAAeL,IAAa,EAAI,EAEhC,MAAMiB,EAAWF,EAAI,QAAQ,IACzB,CAACE,GAAY,CAACzB,EAAeyB,CAAQ,IACzClB,EAAkBkB,EAClBX,EAAaP,CAAe,EAC9B,CAAC,CACH,CAAC,EAEDD,GAAS,iBAAiB,QAAS,IAAM,CACvCO,GAAgB,EAChBC,EAAaP,CAAe,CAC9B,CAAC,EAED,IAAImB,EAAelB,EAAA,EACnB,OAAO,iBAAiB,SAAU,IAAY,CAC5C,MAAMmB,EAAcnB,EAAA,EAChBmB,IAAgBD,IAClBZ,EAAaP,CAAe,EAC5BmB,EAAeC,EAEnB,CAAC,EAEDb,EAAaP,CAAe"}