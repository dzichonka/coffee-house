{"version":3,"file":"fetcher-IzjmCLXP.js","sources":["../../src/scripts/utils/fetcher.ts"],"sourcesContent":["export async function fetcher<T, B = undefined>(\n  url: string,\n  loaderId: string,\n  options: FetchOptions<B> = {},\n): Promise<ApiResponse<T>> {\n  const loader = document.querySelector<HTMLDivElement>(loaderId);\n  if (loader) loader.classList.add(\"active\");\n\n  try {\n    const { method = \"GET\", body, headers = {} } = options;\n\n    const res = await fetch(url, {\n      method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...headers,\n      },\n      body: body ? JSON.stringify(body) : undefined,\n    });\n\n    if (!res.ok) {\n      return { data: null, error: `HTTP error: ${res.status}` };\n    }\n\n    const json = (await res.json()) as T;\n    return { data: json, error: null };\n  } catch (err) {\n    console.error(\"Fetch error:\", err);\n    return { data: null, error: \"Failed to fetch data\" };\n  } finally {\n    if (loader) loader.classList.remove(\"active\");\n  }\n}\n"],"names":["fetcher","url","loaderId","options","loader","method","body","headers","res","err"],"mappings":"AAAA,eAAsBA,EACpBC,EACAC,EACAC,EAA2B,CAAA,EACF,CACzB,MAAMC,EAAS,SAAS,cAA8BF,CAAQ,EAC1DE,GAAQA,EAAO,UAAU,IAAI,QAAQ,EAEzC,GAAI,CACF,KAAM,CAAE,OAAAC,EAAS,MAAO,KAAAC,EAAM,QAAAC,EAAU,CAAA,GAAOJ,EAEzCK,EAAM,MAAM,MAAMP,EAAK,CAC3B,OAAAI,EACA,QAAS,CACP,eAAgB,mBAChB,GAAGE,CAAA,EAEL,KAAMD,EAAO,KAAK,UAAUA,CAAI,EAAI,MAAA,CACrC,EAED,OAAKE,EAAI,GAKF,CAAE,KADK,MAAMA,EAAI,KAAA,EACH,MAAO,IAAA,EAJnB,CAAE,KAAM,KAAM,MAAO,eAAeA,EAAI,MAAM,EAAA,CAKzD,OAASC,EAAK,CACZ,eAAQ,MAAM,eAAgBA,CAAG,EAC1B,CAAE,KAAM,KAAM,MAAO,sBAAA,CAC9B,QAAA,CACML,GAAQA,EAAO,UAAU,OAAO,QAAQ,CAC9C,CACF"}