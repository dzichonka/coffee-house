import{f as X}from"./fetcher-IzjmCLXP.js";const g=document.querySelector(".slider-wrapper"),f=document.querySelector(".wrapper"),p=document.querySelector(".slider"),i=document.querySelector(".dots"),M=document.querySelector(".prev"),C=document.querySelector(".next"),m=document.querySelector("#error"),D=document.querySelector("#refresh");async function w(){if(!g||!i)return;g.innerHTML="",i.innerHTML="";const{data:x,error:k}=await X("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/products/favorites","#loader");if(k){p&&(p.style.display="none"),i&&(i.style.display="none"),m&&(m.style.display="flex");return}const s=x?.data??[];s.forEach((e,n)=>{const r=document.createElement("div");r.classList.add("slide"),n===0&&r.classList.add("active"),r.innerHTML=`
      <img src="images/favourites/${e.id}.png" alt="${e.name}">
      <h3>${e.name}</h3>
      <p>${e.description}</p>
      <h3>$${e.price}</h3>
    `,g.append(r);const a=document.createElement("div");a.classList.add("dot"),a.appendChild(document.createElement("span")),i.appendChild(a)});const F=Array.from(document.querySelectorAll(".slide")),h=Array.from(i.querySelectorAll(".dot"));let t=0,S=5e3,y=null,c=null,o=null,d=0;function E(e){const n=e.querySelector("span");if(!e)return;c&&cancelAnimationFrame(c);function r(a){if(!n)return;o||(o=a);const $=a-o+d,T=Math.min($/S*100,100);n&&(n.style.width=T+"%"),T<100?c=requestAnimationFrame(r):(o=null,d=0,o=null)}c=requestAnimationFrame(r)}function q(){c&&cancelAnimationFrame(c),o&&(d+=performance.now()-o),o=null}function L(){c&&cancelAnimationFrame(c),h.forEach(e=>{const n=e.querySelector("span");n&&(n.style.width="0%")}),d=0,o=null}function u(e){F.forEach((n,r)=>n.classList.toggle("active",r===e)),L(),E(h[e])}function l(){v(),y=setTimeout(()=>{t=(t+1)%s.length,u(t),l()},S-d)}function v(){y&&clearTimeout(y)}M?.addEventListener("click",()=>{t=(t-1+s.length)%s.length,u(t),l()}),C?.addEventListener("click",()=>{t=(t+1)%s.length,u(t),l()}),f?.addEventListener("mouseenter",()=>{v(),q()}),f?.addEventListener("mouseleave",()=>{l(),E(h[t])});let A=0;f?.addEventListener("touchstart",e=>{if(v(),q(),!(e instanceof TouchEvent))return;A=e.touches[0].clientX}),f?.addEventListener("touchend",e=>{if(!(e instanceof TouchEvent))return;const r=e.changedTouches[0].clientX-A;r>50?t=(t-1+s.length)%s.length:r<-50&&(t=(t+1)%s.length),u(t),L(),l()}),u(t),l()}w();D?.addEventListener("click",()=>{w(),p&&(p.style.display="flex"),i&&(i.style.display="flex"),m&&(m.style.display="none")});export{w as initSlider};
//# sourceMappingURL=slider-x67a8gq_.js.map
