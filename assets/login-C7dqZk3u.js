import{f}from"./fetcher-IzjmCLXP.js";function m(e){const r=e.match(new RegExp("\\p{L}","gu"));return r?r.every(t=>/^[A-Za-z]$/.test(t)):!0}const l=document.querySelector("#login-form"),n=document.querySelector("#login"),o=document.querySelector("#password"),a=document.querySelector("#login-btn");if(!l||!n||!o||!a)throw new Error("Login form elements not found");a.disabled=!0;function c(e){return e.length<3?"Login must be at least 3 characters":m(e)?/^[A-Za-z]/.test(e)?null:"Login must start with a letter":"Only English letters allowed"}function d(e){return e.length<6?"Password must be at least 6 characters":/\d/.test(e)?null:"Password must contain a number"}function u(e,r){const t=e.nextElementSibling;if(!(t instanceof HTMLSpanElement)||!t)throw new Error("Error span not found");e.addEventListener("blur",()=>{const s=r(e.value);s?(e.classList.add("invalid"),t.textContent=s,t.classList.add("active")):e.classList.add("valid"),v()}),e.addEventListener("focus",()=>{e.classList.remove("invalid"),e.classList.remove("valid"),t.textContent="",t.classList.remove("active")})}function v(){if(!n||!o||!a)return;const e=c(n.value),r=d(o.value);a.disabled=!!e||!!r}u(n,c);u(o,d);a.addEventListener("click",async e=>{if(e.preventDefault(),l.querySelector(".alert-error")&&l.querySelector(".alert-error")?.remove(),!n||!o)return;const r={login:n.value,password:o.value},{data:t,error:s}=await f("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/login","#loader",{method:"POST",body:r});if(s){const i=document.createElement("div");i.className="alert-error",i.textContent="Incorrect login or password",l.append(i)}t&&t.data&&(window.location.href="index")});
//# sourceMappingURL=login-C7dqZk3u.js.map
