import{f}from"./fetcher-IzjmCLXP.js";import{u as m}from"./userState-BenL3nAi.js";import{v as c,a as d}from"./validation-C_nO4Zpk.js";const{setToken:v}=m(),o=document.querySelector("#login-form"),r=o?.querySelector("#login"),n=o?.querySelector("#password"),s=o?.querySelector("#login-btn");if(!(o instanceof HTMLFormElement)||!(r instanceof HTMLInputElement)||!(n instanceof HTMLInputElement)||!(s instanceof HTMLButtonElement))throw new Error("Login form elements not found");s.disabled=!0;function u(e,a){const t=e.nextElementSibling;if(!(t instanceof HTMLSpanElement)||!t)throw new Error("Error span not found");e.addEventListener("blur",()=>{const l=a(e.value);l?(e.classList.add("invalid"),t.textContent=l,t.classList.add("active")):e.classList.add("valid"),L()}),e.addEventListener("focus",()=>{e.classList.remove("invalid"),e.classList.remove("valid"),t.textContent="",t.classList.remove("active")})}function L(){if(!r||!n||!s)return;const e=c(r.value),a=d(n.value);s.disabled=!!e||!!a}u(r,c);u(n,d);s.addEventListener("click",async e=>{if(e.preventDefault(),o.querySelector(".alert-error")&&o.querySelector(".alert-error")?.remove(),!r||!n)return;const a={login:r.value,password:n.value},{data:t,error:l}=await f("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/login","#loader",{method:"POST",body:a});if(l){const i=document.createElement("div");i.className="alert-error",i.textContent="Incorrect login or password",o.append(i)}t&&t.data&&(v(t.data.access_token),window.location.href="index")});
//# sourceMappingURL=login-DJ-jDlUN.js.map
