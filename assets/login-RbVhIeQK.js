import{u}from"./userState-C2crR08W.js";import{v as i,a as c}from"./validation-DBJCbEPH.js";import{s as f,a as m}from"./firebase-8-SqUyFW.js";const{setToken:v}=u(),o=document.querySelector("#login-form"),n=o?.querySelector("#login"),a=o?.querySelector("#password"),s=o?.querySelector("#login-btn");if(!(o instanceof HTMLFormElement)||!(n instanceof HTMLInputElement)||!(a instanceof HTMLInputElement)||!(s instanceof HTMLButtonElement))throw new Error("Login form elements not found");s.disabled=!0;function d(t,r){const e=t.nextElementSibling;if(!(e instanceof HTMLSpanElement)||!e)throw new Error("Error span not found");t.addEventListener("blur",()=>{const l=r(t.value);l?(t.classList.add("invalid"),e.textContent=l,e.classList.add("active")):t.classList.add("valid"),E()}),t.addEventListener("focus",()=>{t.classList.remove("invalid"),t.classList.remove("valid"),e.textContent="",e.classList.remove("active")})}function E(){if(!n||!a||!s)return;const t=i(n.value),r=c(a.value);s.disabled=!!t||!!r}d(n,i);d(a,c);s.addEventListener("click",async t=>{if(t.preventDefault(),o.querySelector(".alert-error")&&o.querySelector(".alert-error")?.remove(),!(!n||!a))try{const l=await(await f(m,n.value,a.value)).user.getIdToken();v(l),window.location.href="cart"}catch(r){console.error("Login error:",r);const e=document.createElement("div");e.className="alert-error",r.code==="auth/user-not-found"?e.textContent="User not found":r.code==="auth/wrong-password"?e.textContent="Incorrect password":e.textContent="Login failed. Please try again.",o.append(e)}});
//# sourceMappingURL=login-RbVhIeQK.js.map
